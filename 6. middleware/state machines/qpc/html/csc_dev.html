<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QP/C: Deviations</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="ql-preview.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="ql-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <div id="projectlogo">
    <a href="https://www.state-machine.com" title="Quantum Leaps"><img alt="Logo" src="logo_ql.png"/></a>
  </div>
   <div id="projectname">
    QP/C
    &nbsp;<span id="projectnumber">7.3.4</span>
   </div>
   <div id="projectbrief">Real-Time Embedded Framework</div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('csc_dev.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Deviations</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><span class="prev_button"><a class="el" href="csc_gcs.html">Guideline Compliance Summary (GCS)</a></span> </p><div style="clear:both;"></div> <h1><a class="anchor" id="csc_dev-uid"></a>
Deviation UIDs</h1>
<p>The <b>deviations</b> referenced in the compliance summary are identified using <a class="el" href="cert.html#cert_uid">Unique Identifiers (UIDs)</a> with the following structure:</p>
<p><b>UID for a MISRA Deviation Permits/Records:</b> </p><pre class="fragment">+++------------------- 1. Work artifact class ('DVP' Deviation Permit, 'DVR' Deviation Record)
||| ++---------------- 2. Project identifier ('QP' for QP Framework, 'QS' for QP/Spy Software Tracing)
||| || +++------------ 3. Coding standard (MC3 for MISRA-C:2023)
||| || ||| +---------- 4. Directive ('D') or Rule ('R')
||| || ||| |++-++----- 5. Guideline number (e.g., R08_07 for Rule 8.7)
||| || ||| ||| ||  +-- 6. Optional variant letter ('A', 'B', 'C'...)
||| || ||| ||| ||  |
DVP-QP-MC4-Rxx-yy[-A]
</pre><p> Examples:</p><ul>
<li><a class="el" href="csc_dev.html#DVP-QP-MC4-D04_09B">DVP-QP-MC4-D04_09B</a> - <a class="el" href="csc_gep.html#csc_dev-per">Deviation Permit</a> for MISRA-C:2023 Directive 4.9; variant B of the deviation</li>
<li><a class="el" href="csc_dev.html#DVR-QP-MC4-R11_08">DVR-QP-MC4-R11_08</a> - <a class="el" href="csc_gep.html#csc_dev-rec">Deviation Record</a> for MISRA-C:2023 Rule 11.8</li>
</ul>
<h1><a class="anchor" id="csc_dvp"></a>
Deviation Permits</h1>
<p>This section presents <a class="el" href="csc_gep.html#csc_dev-per">Deviation Permits</a> for the MISRA-C:2023 deviations in the Application code, which are caused by the QP/C framework design or implementation. This section also describes workarounds to avoid some deviations.</p>
<dl class="section remark"><dt>Remarks</dt><dd><ul>
<li>Most of the Deviation Permits in this section pertain also to the QP/C source code.</li>
<li>The Deviation Permits listed below use the section "Restrictions" instead of "Requirements" suggested in <a class="el" href="csc.html#csc_ref">[MISRA-Comply]</a> to avoid any confusion with the <a class="el" href="srs.html">system Requirements</a>.</li>
</ul>
</dd></dl>
<p><a id="a87_DVP-QP-MC4-D04_09A" name="a87_DVP-QP-MC4-D04_09A"></a> </p>
<h2><a class="anchor" id="DVP-QP-MC4-D04_09A"></a>
DVP-QP-MC4-D04_09A</h2>
<table class="doxtable">
<tr>
<th>DVP-QP-MC4-D04_09A </th></tr>
<tr style="text-align:left">
<th>Directive 4.9(Advisory): A function should be used in preference to a function-like macro where they are interchangeable (FALSE-POSITIVE diagnosis) </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>No reasons are given, as it is a FALSE-POSITIVE reporting in which no violation actually occurred. </li>
</ul>
</td></tr>
<tr>
<td><b>Use-Case</b><br  />
 PCLP reports violation of this <em>advisory</em> MISRA directive for <em>every</em> function-like macro definition, but without deeper analysis whether the macro is actually <b>interchangeable</b> with a function. Therefore, most of the PCLP violation reports for Directive 4.9 are actually only diagnosis of a <em>possible</em> violation of this directive (message category 2 in Section 5.3.3 of <a class="el" href="csc.html#csc_ref">[MISRA4]</a>). This Deviation Record pertains to situations when a macro is <b>NOT</b> interchangeable with a function, so the Directive 4.9 is <b>NOT</b> actually violated and the PCLP report represents a FALSE-POSITIVE. </td></tr>
<tr>
<td><p class="starttd"><b>Examples</b><br  />
 The <a class="el" href="qsafe_8h.html#a88366b3327788936a716e1554dd86e51">Q_REQUIRE_ID()</a> macro specifies precondition assertion, but it cannot be replaced with a function for the reason of maintainability. This is because in case the application developer wishes to <em>disable</em> assertions, a macro can be redefined to generate no code and no overhead. In contrast, a function, even if empty, could cause some additional code and overhead. </p><div class="fragment"><div class="line">. . .</div>
<div class="line"><span class="comment">// precondition assertion</span></div>
<div class="line">Q_REQUIRE_ID(100, e != (<a class="code hl_class" href="struct_q_evt.html">QEvt</a> *)0);</div>
<div class="line">. . .</div>
<div class="ttc" id="astruct_q_evt_html"><div class="ttname"><a href="struct_q_evt.html">QEvt</a></div><div class="ttdoc">Event class.</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l00147">qp.h:147</a></div></div>
</div><!-- fragment --><p class="endtd">A state-handler function performs down-casting of the received event from the base class <code><a class="el" href="struct_q_evt.html" title="Event class.">QEvt</a></code> down to the specific subclass using the function-like macro <a class="el" href="qp_8h.html#a9f117cb1bc50e9ef4dcc933533ccdd7f">Q_EVT_CAST()</a>. This macro contains a parameterized type-cast and for this reason it is not interchangeable with a function. </p><div class="fragment"><div class="line">. . .</div>
<div class="line">me-&gt;x = <a class="code hl_define" href="qp_8h.html#a9f117cb1bc50e9ef4dcc933533ccdd7f">Q_EVT_CAST</a>(MyEvt)-&gt;x;</div>
<div class="line">. . .</div>
<div class="ttc" id="aqp_8h_html_a9f117cb1bc50e9ef4dcc933533ccdd7f"><div class="ttname"><a href="qp_8h.html#a9f117cb1bc50e9ef4dcc933533ccdd7f">Q_EVT_CAST</a></div><div class="ttdeci">#define Q_EVT_CAST(class_)</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l00523">qp.h:523</a></div></div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>For the QP Application code, the permit is only granted for the <em>function-like macros</em> explicitly listed and traced to this permit UID <b>DVP-QP-MC4-D04_09A</b> in the <a class="el" href="qpc_8lnt.html" title="PC-Lint-Plus option file for analysing both QP/C and QP/C Applications">qpc.lnt</a> PCLP configuration file.</li>
<li>For the QP/C Source Code, the permit is additionally granted for the <em>function-like macros</em> explicitly listed and traced to this permit UID <b>DVP-QP-MC4-D04_09A</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a88_DVP-QP-MC4-D04_09B" name="a88_DVP-QP-MC4-D04_09B"></a> </p>
<h2><a class="anchor" id="DVP-QP-MC4-D04_09B"></a>
DVP-QP-MC4-D04_09B</h2>
<table class="doxtable">
<tr>
<th>DVP-QP-MC4-D04_09B </th></tr>
<tr style="text-align:left">
<th>Directive 4.9(Advisory): A function should be used in preference to a function-like macro where they are interchangeable (CORRECT diagnosis) </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintainability)</li>
<li>Code quality (Performance efficiency)</li>
<li>Adopted code integration (Generated code) </li>
</ul>
</td></tr>
<tr>
<td><b>Use-Case</b><br  />
 Deviations traced to this permit (<b>DVP-QP-MC4-D04_09B</b>) are CORRECT diagnoses of function-like macros that could potentially be replaced by a (inline) function. However, in a widely portable code, like the QP/C Framework, it is sometimes necessary to provide configuration options, which are not easily implemented as C functions. For example, a function to calculate an integer log-base-2 of a given bitmask can be implemented very efficiently with a built-in <code>CLZ</code> (count-leading-zeros) instruction, but if this instruction is not supported by a given CPU architecture, log-base-2 needs to be implemented as a regular function. In that case QP/C defines <code><a class="el" href="qp_8h.html#a0fb2499d124f79606d6d5881e082fdda">QF_LOG2()</a></code> as a function-like macro, which can be redefined as needed. </td></tr>
<tr>
<td><b>Example</b><br  />
 The <code><a class="el" href="qp_8h.html#a0fb2499d124f79606d6d5881e082fdda">QF_LOG2()</a></code> function-like macro could be replaced with a function, but this is a performance-critical operation used in real-time schedulers, where the function call overhead and clobbering of additional CPU registers might be highly undesirable. Also, certain CPU architectures provide a hardware instruction (e.g., <code>CLZ</code>), which can be used to efficiently implement <code><a class="el" href="qp_8h.html#a0fb2499d124f79606d6d5881e082fdda">QF_LOG2()</a></code>. To take advantage of such hardware accommodations, a function-like macro is preferable to a function (even if inlined). <div class="fragment"><div class="line">. . .</div>
<div class="line">uint8_t n = <a class="code hl_function" href="qp_8h.html#a0fb2499d124f79606d6d5881e082fdda">QF_LOG2</a>(ready_set);</div>
<div class="line">. . .</div>
<div class="ttc" id="aqp_8h_html_a0fb2499d124f79606d6d5881e082fdda"><div class="ttname"><a href="qp_8h.html#a0fb2499d124f79606d6d5881e082fdda">QF_LOG2</a></div><div class="ttdeci">uint_fast8_t QF_LOG2(QPSetBits const bitmask)</div><div class="ttdef"><b>Definition</b> <a href="qf__act_8c_source.html#l00090">qf_act.c:90</a></div></div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>This permit is only granted for the <em>function-like macros</em> explicitly listed and traced to this permit UID <b>DVP-QP-MC4-D04_09B</b> in the <a class="el" href="qpc_8lnt.html" title="PC-Lint-Plus option file for analysing both QP/C and QP/C Applications">qpc.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a89_DVP-QP-MC4-D04_08" name="a89_DVP-QP-MC4-D04_08"></a> </p>
<h2><a class="anchor" id="DVP-QP-MC4-D04_08"></a>
DVP-QP-MC4-D04_08</h2>
<table class="doxtable">
<tr>
<th>DVP-QP-MC4-D04_08 </th></tr>
<tr style="text-align:left">
<th>Directive 4.8(Advisory): If a pointer to a structure or union is never dereferenced within a translation unit then the implementation of the object should be hidden </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Adopted code integration </li>
</ul>
</td></tr>
<tr>
<td><b>Use-Case</b><br  />
 In the widely portable infrastructure software, like the QP/C Framework, the provided API must be generic. Some definitions in such a generic API are not always fully de-referenced in all translation units that include the QP/C Framework header files, yet removing the definitions would break other modules that require full definitions. </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>This permit is only granted for the header files explicitly listed and traced to this permit UID <b>DVP-QP-MC4-D04_08</b> in the <a class="el" href="qpc_8lnt.html" title="PC-Lint-Plus option file for analysing both QP/C and QP/C Applications">qpc.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a90_DVP-QP-MC4-R10_03" name="a90_DVP-QP-MC4-R10_03"></a> </p>
<h2><a class="anchor" id="DVP-QP-MC4-R10_03"></a>
DVP-QP-MC4-R10_03</h2>
<table class="doxtable">
<tr>
<th>DVP-QP-MC4-R10_03 </th></tr>
<tr style="text-align:left">
<th>Rule 10.3(Required): The value of an expression shall not be assigned to an object with a narrower essential type or a different essential type category </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintainability)</li>
<li>Code quality (Usability / Interoperability)</li>
<li>Adopted code integration </li>
</ul>
</td></tr>
<tr>
<td><b>Use-Case</b><br  />
 PCLP reports violation of Rule 10.3 in the application-level state machine code for the event signals in the <code>switch</code> statement. </td></tr>
<tr>
<td><b>Example</b><br  />
 The following code snippet provides an example of a state-handler function: <div class="fragment"><div class="line"><span class="keyword">enum</span> {</div>
<div class="line">   . . .</div>
<div class="line">   TIMEOUT_SIG,</div>
<div class="line">   . . .</div>
<div class="line">}</div>
<div class="line">. . .</div>
<div class="line">QState Philo_thinking(Philo * <span class="keyword">const</span> me, <a class="code hl_class" href="struct_q_evt.html">QEvt</a> <span class="keyword">const</span> * <span class="keyword">const</span> e) {</div>
<div class="line">    <a class="code hl_typedef" href="qp_8h.html#aca8402343f1e6379e68bc32d471c3ff1">QState</a> status_;</div>
<div class="line">    <span class="keywordflow">switch</span> (e-&gt;<a class="code hl_variable" href="struct_q_evt.html#adc58f5661f94c8bb22bf632afa41a804">sig</a>) {</div>
<div class="line">        . . .</div>
<div class="line">        <span class="keywordflow">case</span> TIMEOUT_SIG: {  <span class="comment">// &lt;=== Rule 10.3 violation</span></div>
<div class="line">            status_ = <a class="code hl_define" href="qp_8h.html#a8f06cd90ba5060780fc61a4810e3eb50">Q_TRAN</a>(&amp;Philo_hungry);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        . . .</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> status_;</div>
<div class="line">}</div>
<div class="ttc" id="aqp_8h_html_a8f06cd90ba5060780fc61a4810e3eb50"><div class="ttname"><a href="qp_8h.html#a8f06cd90ba5060780fc61a4810e3eb50">Q_TRAN</a></div><div class="ttdeci">#define Q_TRAN(target_)</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l00499">qp.h:499</a></div></div>
<div class="ttc" id="aqp_8h_html_aca8402343f1e6379e68bc32d471c3ff1"><div class="ttname"><a href="qp_8h.html#aca8402343f1e6379e68bc32d471c3ff1">QState</a></div><div class="ttdeci">enum QStateRet QState</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l00223">qp.h:223</a></div></div>
<div class="ttc" id="astruct_q_evt_html_adc58f5661f94c8bb22bf632afa41a804"><div class="ttname"><a href="struct_q_evt.html#adc58f5661f94c8bb22bf632afa41a804">QEvt::sig</a></div><div class="ttdeci">QSignal sig</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l00151">qp.h:151</a></div></div>
</div><!-- fragment --> <br  />
 The Rule 10.3 violation is reported because the type of the <code>switch</code> discriminator <code>e-&gt;sig</code> is <a class="el" href="qp_8h.html#a35355ea8d51391175735eda24ca2d466">QSignal</a>, while the type of application-level signals typically is an enumeration. Attempts to avoid deviating from this rule by defining event signals as type-cast constants as opposed to enumeration, or by type casting from enumeration to <a class="el" href="qp_8h.html#a35355ea8d51391175735eda24ca2d466">QSignal</a> actually lower the code quality. Therefore deviation from Rule 10.3 is permitted in this particular case and context. </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation permit <b>DVP-QP-MC4-R10_03</b> is granted only for the enumerated signals in the <code>case</code> statements insie the state-handler functions. </li>
</ul>
</td></tr>
</table>
<p><a id="a91_DVP-QP-MC4-R11_01" name="a91_DVP-QP-MC4-R11_01"></a> </p>
<h2><a class="anchor" id="DVP-QP-MC4-R11_01"></a>
DVP-QP-MC4-R11_01</h2>
<table class="doxtable">
<tr>
<th>DVP-QP-MC4-R11_01 </th></tr>
<tr style="text-align:left">
<th>Rule 11.1(Required): Conversions shall not be performed between a pointer to a function and any other type </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintainability / Modularity)</li>
<li>Code quality (Usability / Approprateness recognizability)</li>
<li>Adopted code integration </li>
</ul>
</td></tr>
<tr>
<td><b>Use-Case</b><br  />
 The Rule 11.1 violation occurs in the QP state machine implementation strategy, which is based on <em>pointers to functions</em> (state-handler functions). Notably, the first parameter in the <em>generic</em> state-handler signature is a pointer to the <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class (QHsm-style state machine implementation strategy)">QHsm</a> base class. However, the first parameter in the <em>specific</em> state-handler functions is a pointer to the <b>subclass</b> of <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class (QHsm-style state machine implementation strategy)">QHsm</a>. Since the QP internal implementation can only use the <em>generic</em> state-handlers (because specific state-handlers are defined in the QP Application), this discrepancy requires casting of the pointers to the specific state handlers on pointers to the generic state handlers, which violates Rule 11.1. </td></tr>
<tr>
<td><b>Example</b><br  />
 The following code snippet provides an example of a state-handler function: <div class="fragment"><div class="line"><a class="code hl_typedef" href="qp_8h.html#aca8402343f1e6379e68bc32d471c3ff1">QState</a> Philo_thinking(Philo * <span class="keyword">const</span> me, <a class="code hl_class" href="struct_q_evt.html">QEvt</a> <span class="keyword">const</span> * <span class="keyword">const</span> e) {</div>
<div class="line">    <a class="code hl_typedef" href="qp_8h.html#aca8402343f1e6379e68bc32d471c3ff1">QState</a> status_;</div>
<div class="line">    <span class="keywordflow">switch</span> (e-&gt;<a class="code hl_variable" href="struct_q_evt.html#adc58f5661f94c8bb22bf632afa41a804">sig</a>) {</div>
<div class="line">        . . .</div>
<div class="line">        <span class="keywordflow">case</span> TIMEOUT_SIG: {</div>
<div class="line">            status_ = <a class="code hl_define" href="qp_8h.html#a8f06cd90ba5060780fc61a4810e3eb50">Q_TRAN</a>(&amp;Philo_hungry); <span class="comment">// &lt;=== Rule 11.1 violation</span></div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        . . .</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> status_;</div>
<div class="line">}</div>
<div class="line">. . .</div>
<div class="line"><span class="comment">// specific state-handler with &quot;me&quot;-pointer of type Philo rather than QHsm</span></div>
<div class="line">QState Philo_hungry(Philo * <span class="keyword">const</span> me, <a class="code hl_class" href="struct_q_evt.html">QEvt</a> <span class="keyword">const</span> * <span class="keyword">const</span> e) {</div>
<div class="line">    . . .</div>
<div class="line">}</div>
</div><!-- fragment --> The Rule 11.1 violation is reported because the macro <a class="el" href="qp_8h.html#a8f06cd90ba5060780fc61a4810e3eb50">Q_TRAN()</a> has to store a pointer to the <em>specific</em> state-handler function <code>&amp;Philo_hungry</code> in a pointer to generic state-handler function. </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation permit is only granted for the QP macros explicitly listed and traced to this permit UID <b>DVP-QP-MC4-R11_01</b> in the <a class="el" href="qpc_8lnt.html" title="PC-Lint-Plus option file for analysing both QP/C and QP/C Applications">qpc.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a92_DVP-QP-MC4-R11_03A" name="a92_DVP-QP-MC4-R11_03A"></a> </p>
<h2><a class="anchor" id="DVP-QP-MC4-R11_03A"></a>
DVP-QP-MC4-R11_03A</h2>
<table class="doxtable">
<tr>
<th>DVP-QP-MC4-R11_03A </th></tr>
<tr style="text-align:left">
<th>Rule 11.3(Required): A cast shall not be performed between a pointer to object type and a pointer to a different object type (<u>object-oriented upcast</u>) </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Functional suitability / Functional appropriateness)</li>
<li>Adopted code integration </li>
</ul>
</td></tr>
<tr>
<td><p class="starttd"><b>Use-Case</b><br  />
 QP Framework is fundamentally <a class="el" href="sas.html#sas_oop">object-oriented</a>, which in the C programming language requires applying object-oriented design patterns and idioms. One of such idioms is using a pointer to a subclass in place of a pointer to the superclass. In truly object-oriented languages this is called <b>upcasting</b> and is performed automatically because it is <b>safe</b>. However, the C compimler (and the static analysis tool, like PCLP) does not "know" about the inheritance relationship between the pointers and therefore it reports violation of Rule 11.3.</p>
<dl class="section remark"><dt>Remarks</dt><dd>The permit DVP-QP-MC4-R11_03A is the first permit variant for Rule 11.3. See also <a class="el" href="csc_dev.html#DVP-QP-MC4-R11_03B">DVP-QP-MC4-R11_03B</a> and <a class="el" href="csc_dev.html#DVR-QP-MC4-R11_03C">DVR-QP-MC4-R11_03C</a> . </dd></dl>
</td></tr>
<tr>
<td><b>Examples</b><br  />
 <div class="fragment"><div class="line"><a class="code hl_typedef" href="qp_8h.html#aca8402343f1e6379e68bc32d471c3ff1">QState</a> Calc_on(Calc * <span class="keyword">const</span> me, <a class="code hl_class" href="struct_q_evt.html">QEvt</a> <span class="keyword">const</span> * <span class="keyword">const</span> e) {</div>
<div class="line">    <a class="code hl_typedef" href="qp_8h.html#aca8402343f1e6379e68bc32d471c3ff1">QState</a> status_;</div>
<div class="line">    <span class="keywordflow">switch</span> (e-&gt;<a class="code hl_variable" href="struct_q_evt.html#adc58f5661f94c8bb22bf632afa41a804">sig</a>) {</div>
<div class="line">        <span class="keywordflow">case</span> C_SIG: {</div>
<div class="line">            . . .</div>
<div class="line">            status_ = <a class="code hl_define" href="qp_8h.html#af7e90f8b99a650f0550bfb45c5a99cdb">QM_TRAN</a>(&amp;tatbl_); <span class="comment">// &lt;== Rule 11.3 violation</span></div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        . . .</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> status_;</div>
<div class="line">}</div>
<div class="ttc" id="aqp_8h_html_af7e90f8b99a650f0550bfb45c5a99cdb"><div class="ttname"><a href="qp_8h.html#af7e90f8b99a650f0550bfb45c5a99cdb">QM_TRAN</a></div><div class="ttdeci">#define QM_TRAN(tatbl_)</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l00570">qp.h:570</a></div></div>
</div><!-- fragment --> The Rule 11.3 is violated in the macro <a class="el" href="qp_8h.html#af7e90f8b99a650f0550bfb45c5a99cdb">QM_TRAN()</a>, which needs to perform an upcast from <a class="el" href="struct_q_msm.html" title="Hierarchical State Machine class (QMsm-style state machine implementation strategy)">QMsm</a> to <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class (QHsm-style state machine implementation strategy)">QHsm</a>. </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>This permit is only granted for the <em>function-like macros</em> explicitly listed and traced to this permit UID <b>DVP-QP-MC4-R11_03A</b> in the <a class="el" href="qpc_8lnt.html" title="PC-Lint-Plus option file for analysing both QP/C and QP/C Applications">qpc.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a93_DVP-QP-MC4-R11_03B" name="a93_DVP-QP-MC4-R11_03B"></a> </p>
<h2><a class="anchor" id="DVP-QP-MC4-R11_03B"></a>
DVP-QP-MC4-R11_03B</h2>
<table class="doxtable">
<tr>
<th>DVP-QP-MC4-R11_03B </th></tr>
<tr style="text-align:left">
<th>Rule 11.3(Required): A cast shall not be performed between a pointer to object type and a pointer to a different object type (<u>object-oriented downcast</u>) </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Functional suitability / Functional appropriateness)</li>
<li>Adopted code integration </li>
</ul>
</td></tr>
<tr>
<td><p class="starttd"><b>Use-Case</b><br  />
 QP Framework is fundamentally <a class="el" href="sas.html#sas_oop">object-oriented</a>, which in the C programming language requires applying object-oriented design patterns and idioms. One of such idioms is casting a pointer to a superclass on a pointer to the subclass. In object-oriented languages this is called <b>downcasting</b>. Downcast is not as safe as upcast and requires some additional type information to choose the right subclass, but still the types are closely related.</p>
<dl class="section remark"><dt>Remarks</dt><dd>The permit DVP-QP-MC4-R11_03B is the first permit variant for Rule 11.3. See also <a class="el" href="csc_dev.html#DVP-QP-MC4-R11_03A">DVP-QP-MC4-R11_03A</a> and <a class="el" href="csc_dev.html#DVR-QP-MC4-R11_03C">DVR-QP-MC4-R11_03C</a>.</dd></dl>
</td></tr>
<tr>
<td><b>Examples</b><br  />
 <div class="fragment"><div class="line"><span class="keywordflow">case</span> EAT_SIG:</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_define" href="qp_8h.html#a9f117cb1bc50e9ef4dcc933533ccdd7f">Q_EVT_CAST</a>(TableEvt)-&gt;philoNum == PHILO_ID(me)) . . .</div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>This permit is only granted for the QP macros explicitly listed and traced to this permit UID <b>DVP-QP-MC4-R11_03B</b> in the <a class="el" href="qpc_8lnt.html" title="PC-Lint-Plus option file for analysing both QP/C and QP/C Applications">qpc.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a94_DVP-QP-MC4-R12_03" name="a94_DVP-QP-MC4-R12_03"></a> </p>
<h2><a class="anchor" id="DVP-QP-MC4-R12_03"></a>
DVP-QP-MC4-R12_03</h2>
<table class="doxtable">
<tr>
<th>DVP-QP-MC4-R12_03 </th></tr>
<tr style="text-align:left">
<th>Rule 12.3(Advisory): The comma operator should not be used </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintainability)</li>
<li>Code quality (Usability)</li>
<li>Adopted code integration </li>
</ul>
</td></tr>
<tr>
<td><b>Use-Case</b><br  />
 QP Framework uses the comma operator in the macros for state machine implementation (<a class="el" href="qp_8h.html#ad8abd2f7098c41ec464343d9d8f1eadc">Q_SUPER()</a>, <a class="el" href="qp_8h.html#a8f06cd90ba5060780fc61a4810e3eb50">Q_TRAN()</a>, <a class="el" href="qp_8h.html#ac927f38462ffb9c8cca4e4f2920f8fcd">Q_TRAN_HIST()</a>, <a class="el" href="qp_8h.html#a1ce3343989b290f23c91d9d0fc4dc542">QM_ENTRY()</a>, <a class="el" href="qp_8h.html#af44f060a04828a0d25a99f11dd078f4f">QM_EXIT()</a>, <a class="el" href="qp_8h.html#af7e90f8b99a650f0550bfb45c5a99cdb">QM_TRAN()</a>, etc.) These macros are not replaceable by (inline) functions because of the necessary type casting, as described in <a class="el" href="csc_dev.html#DVP-QP-MC4-R11_03A">DVP-QP-MC4-R11_03A</a> and <a class="el" href="csc_dev.html#DVP-QP-MC4-R11_01">DVP-QP-MC4-R11_01</a>. </td></tr>
<tr>
<td><b>Examples</b><br  />
 <div class="fragment"><div class="line"><span class="keyword">static</span> <a class="code hl_typedef" href="qp_8h.html#aca8402343f1e6379e68bc32d471c3ff1">QState</a> Calc_on(Calc * <span class="keyword">const</span> me, <a class="code hl_class" href="struct_q_evt.html">QEvt</a> <span class="keyword">const</span> * <span class="keyword">const</span> e) {</div>
<div class="line">    <a class="code hl_typedef" href="qp_8h.html#aca8402343f1e6379e68bc32d471c3ff1">QState</a> status_;</div>
<div class="line">    <span class="keywordflow">switch</span> (e-&gt;<a class="code hl_variable" href="struct_q_evt.html#adc58f5661f94c8bb22bf632afa41a804">sig</a>) {</div>
<div class="line">        . . .</div>
<div class="line">        <span class="keywordflow">case</span> OFF_SIG: {</div>
<div class="line">            status_ = <a class="code hl_define" href="qp_8h.html#a8f06cd90ba5060780fc61a4810e3eb50">Q_TRAN</a>(&amp;Calc_final); <span class="comment">// &lt;== Rule 12.3 violation</span></div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">default</span>: {</div>
<div class="line">            status_ = <a class="code hl_define" href="qp_8h.html#ad8abd2f7098c41ec464343d9d8f1eadc">Q_SUPER</a>(&amp;QHsm_top); <span class="comment">// &lt;== Rule 12.3 violation</span></div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> status_;</div>
<div class="line">}</div>
<div class="ttc" id="aqp_8h_html_ad8abd2f7098c41ec464343d9d8f1eadc"><div class="ttname"><a href="qp_8h.html#ad8abd2f7098c41ec464343d9d8f1eadc">Q_SUPER</a></div><div class="ttdeci">#define Q_SUPER(super_)</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l00509">qp.h:509</a></div></div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
 </td></tr>
</table>
<p><a id="a95_DVP-QP-MC4-R13_04" name="a95_DVP-QP-MC4-R13_04"></a> </p>
<h2><a class="anchor" id="DVP-QP-MC4-R13_04"></a>
DVP-QP-MC4-R13_04</h2>
<table class="doxtable">
<tr>
<th>DVP-QP-MC4-R13_04 </th></tr>
<tr style="text-align:left">
<th>Rule 13.4(Advisory): The result of an assignment operator shall not be used </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>No reasons are given, as it is a FALSE-POSITIVE reporting in which no violation actually occurred. </li>
</ul>
</td></tr>
<tr>
<td><b>Use-Case</b><br  />
 PLCP reports violation of this advisory MISRA rule whenever assignment is used on the left-hand side of the comma operator, which is already reported in <a class="el" href="csc_dev.html#DVP-QP-MC4-R12_03">DVP-QP-MC4-R12_03</a>. However, in all cases this happens in QP Framework code, the <em>result</em> of the assignment is discarded and <b>not</b> used. </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>Even though the violation of Rule 13.4 does not occur, the permit is still provided for the specific reporting of the PLCP static analysis tool. The permit applies only to the macros explicitly listed in the <a class="el" href="qpc_8lnt.html" title="PC-Lint-Plus option file for analysing both QP/C and QP/C Applications">qpc.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a96_DVP-QP-MC4-R19_02" name="a96_DVP-QP-MC4-R19_02"></a> </p>
<h2><a class="anchor" id="DVP-QP-MC4-R19_02"></a>
DVP-QP-MC4-R19_02</h2>
<table class="doxtable">
<tr>
<th>DVP-QP-MC4-R19_02 </th></tr>
<tr style="text-align:left">
<th>Rule 19.2(Advisory): The union keyword should not be used </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Performance efficiency / Resource utilization) </li>
</ul>
</td></tr>
<tr>
<td><b>Use-Case</b><br  />
 For QP Framework, deviation from this rule occurs in the data type <a class="el" href="union_q_asm_attr.html" title="Attribute of for the QAsm class (Abstract State Machine).">QAsmAttr</a>, which specifies the private state machine attribute in the <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class (QHsm-style state machine implementation strategy)">QHsm</a> base class. The use of a union in this case is strictly encapsulated inside that class code and is never accessed in the QP Application. The justifications for deviating from the Rule 19.2 are significant savings in RAM for every state machine in the system. Additionally, this deviation is strictly encapsulated inside the QP Framework (in the <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class (QHsm-style state machine implementation strategy)">QHsm</a> base class) and has no impact on QP Applications. </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>This permit is only granted for the <a class="el" href="union_q_asm_attr.html" title="Attribute of for the QAsm class (Abstract State Machine).">QAsmAttr</a> data type traceable to this permit UID <b>DVP-QP-MC4-R19_02</b> in the <a class="el" href="qpc_8lnt.html" title="PC-Lint-Plus option file for analysing both QP/C and QP/C Applications">qpc.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<h1><a class="anchor" id="csc_dvp-qs"></a>
Deviation Permits for QS</h1>
<p>This section presents <a class="el" href="csc_gep.html#csc_dev-per">Deviation Permits</a> for the MISRA-C:2023 deviations in the Application code, which are caused by the <a class="el" href="srs_qs.html">software tracing instrumentation (QP/Spy)</a> built into the QP Framework and available to QP Applications as well. These deviation permits are separated out because they occur only when the QP/Spy instrumentation is enabled.</p>
<dl class="section attention"><dt>Attention</dt><dd>In <b>safety-related</b> QP Application code (configured for the product release), the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> software tracing shall be <b>inactive</b> (the macro <a class="el" href="cmd__options_8dox.html#a668b5df6d955d0b1c77227192078689b" title="The preprocessor switch to activate the QS software tracing instrumentation in QP/C and application c...">Q_SPY</a> shall NOT be defined). In that case, the deviations included in this section are simply NOT present.</dd></dl>
<p><a id="a97_DVP-QS-MC4-D04_09A" name="a97_DVP-QS-MC4-D04_09A"></a> </p>
<h2><a class="anchor" id="DVP-QS-MC4-D04_09A"></a>
DVP-QS-MC4-D04_09A</h2>
<table class="doxtable">
<tr>
<th>DVP-QS-MC4-D04_09A </th></tr>
<tr style="text-align:left">
<th>Directive 4.9(Advisory): A function should be used in preference to a function-like macro where they are interchangeable (FALSE-POSITIVE diagnosis) </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>No reasons are given, as it is a FALSE-POSITIVE reporting in which no violation actually occurred. </li>
</ul>
</td></tr>
<tr>
<td><b>Use-Case</b><br  />
 See background of deviation permit <a class="el" href="csc_dev.html#DVP-QP-MC4-D04_09A">DVP-QP-MC4-D04_09A</a>. </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ol type="1">
<li>For the QP Application code, the permit is only granted for the <em>function-like macros</em> explicitly listed and traced to this permit UID <b>DVP-QS-MC4-D04_09A</b> in the <a class="el" href="qpc_8lnt.html" title="PC-Lint-Plus option file for analysing both QP/C and QP/C Applications">qpc.lnt</a> PCLP configuration file.</li>
<li>For the QP/C Source Code, the permit is additionally granted for the <em>function-like macros</em> explicitly listed and traced to this permit UID <b>DVP-QS-MC4-D04_09A</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file. </li>
</ol>
</td></tr>
<tr>
<td><b>Examples</b><br  />
 The <code>QS_...()</code> macros cannot be replaced with a function for the reason of maintainability. This is because in case the application developer wishes to <em>disable</em> <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> software tracing, the macros can be redefined to generate no code and no overhead. In contrast, functions, even if empty, could cause some additional code and overhead. <div class="fragment"><div class="line">. . .</div>
<div class="line">QS_BEGIN_ID(COMMAND_STAT, 0U) <span class="comment">// app-specific record</span></div>
<div class="line">    <a class="code hl_define" href="qs_8h.html#a129128a3bb20d0b9286ff7c68f1401ab">QS_U8</a>(2, cmdId);</div>
<div class="line">    <a class="code hl_define" href="qs_8h.html#a17e249417c7e49c8e2913b17696acbc0">QS_U32</a>(8, param1);</div>
<div class="line">    <a class="code hl_define" href="qs_8h.html#a17e249417c7e49c8e2913b17696acbc0">QS_U32</a>(8, param2);</div>
<div class="line">    <a class="code hl_define" href="qs_8h.html#a17e249417c7e49c8e2913b17696acbc0">QS_U32</a>(8, param3);</div>
<div class="line"><a class="code hl_define" href="qs_8h.html#a2ed1002d3dda6d95f9f64c59b8453c71">QS_END</a>()</div>
<div class="line">. . .</div>
<div class="ttc" id="aqs_8h_html_a129128a3bb20d0b9286ff7c68f1401ab"><div class="ttname"><a href="qs_8h.html#a129128a3bb20d0b9286ff7c68f1401ab">QS_U8</a></div><div class="ttdeci">#define QS_U8(width_, data_)</div><div class="ttdef"><b>Definition</b> <a href="qs_8h_source.html#l00397">qs.h:397</a></div></div>
<div class="ttc" id="aqs_8h_html_a17e249417c7e49c8e2913b17696acbc0"><div class="ttname"><a href="qs_8h.html#a17e249417c7e49c8e2913b17696acbc0">QS_U32</a></div><div class="ttdeci">#define QS_U32(width_, data_)</div><div class="ttdef"><b>Definition</b> <a href="qs_8h_source.html#l00413">qs.h:413</a></div></div>
<div class="ttc" id="aqs_8h_html_a2ed1002d3dda6d95f9f64c59b8453c71"><div class="ttname"><a href="qs_8h.html#a2ed1002d3dda6d95f9f64c59b8453c71">QS_END</a></div><div class="ttdeci">#define QS_END()</div><div class="ttdef"><b>Definition</b> <a href="qs_8h_source.html#l00356">qs.h:356</a></div></div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation permit is only granted for the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> macros explicitly listed and traced to this permit UID <b>DVP-QS-MC4-D04_09A</b> in the <a class="el" href="qpc_8lnt.html" title="PC-Lint-Plus option file for analysing both QP/C and QP/C Applications">qpc.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a98_DVP-QS-MC4-R11_01" name="a98_DVP-QS-MC4-R11_01"></a> </p>
<h2><a class="anchor" id="DVP-QS-MC4-R11_01"></a>
DVP-QS-MC4-R11_01</h2>
<table class="doxtable">
<tr>
<th>DVP-QS-MC4-R11_01 </th></tr>
<tr style="text-align:left">
<th>Rule 11.1(Required): Conversions shall not be performed between a pointer to a function and any other type </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Usability)</li>
<li>Adopted code integration </li>
</ul>
</td></tr>
<tr>
<td><b>Use-Case</b><br  />
 The <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> software tracing instrumentation deviates from Rule 11.1 in the macros <a class="el" href="qs_8h.html#a3b1ab21c174f2bec448edec8865a8529">QS_FUN_DICTIONARY()</a> and <a class="el" href="qs_8h.html#a9f048034d6f9267e8333dbcd7bb67349">QS_TEST_PROBE_DEF()</a>, where the conversion of pointers to function conversion needs to be performed. In case of the <a class="el" href="qs_8h.html#a3b1ab21c174f2bec448edec8865a8529">QS_FUN_DICTIONARY()</a> macro, the pointer needs to be serialized. In case of the <a class="el" href="qs_8h.html#a9f048034d6f9267e8333dbcd7bb67349">QS_TEST_PROBE_DEF()</a> macro the pointer needs to be stored in a generic array of pointers to function. The most important consideration is that in both cases the pointer to function (after casting) is <b>never</b> dereferenced. </td></tr>
<tr>
<td><p class="starttd"><b>Examples</b><br  />
 The following state-handler for a top-most initial transition in a state machine produces "QS Function Dictionaries" with the macro <a class="el" href="qs_8h.html#a3b1ab21c174f2bec448edec8865a8529">QS_FUN_DICTIONARY()</a>: </p><div class="fragment"><div class="line"><a class="code hl_typedef" href="qp_8h.html#aca8402343f1e6379e68bc32d471c3ff1">QState</a> Calc_initial(Calc * <span class="keyword">const</span> me, <span class="keywordtype">void</span> <span class="keyword">const</span> * <span class="keyword">const</span> par) {</div>
<div class="line">    . . .</div>
<div class="line">    <a class="code hl_define" href="qs_8h.html#a3b1ab21c174f2bec448edec8865a8529">QS_FUN_DICTIONARY</a>(&amp;Calc_on);    <span class="comment">// &lt;== Rule 11.1 violation</span></div>
<div class="line">    <a class="code hl_define" href="qs_8h.html#a3b1ab21c174f2bec448edec8865a8529">QS_FUN_DICTIONARY</a>(&amp;Calc_error); <span class="comment">// &lt;== Rule 11.1 violation</span></div>
<div class="line">    . . .</div>
<div class="ttc" id="aqs_8h_html_a3b1ab21c174f2bec448edec8865a8529"><div class="ttname"><a href="qs_8h.html#a3b1ab21c174f2bec448edec8865a8529">QS_FUN_DICTIONARY</a></div><div class="ttdeci">#define QS_FUN_DICTIONARY(fun_)</div><div class="ttdef"><b>Definition</b> <a href="qs_8h_source.html#l00517">qs.h:517</a></div></div>
</div><!-- fragment --><p class="endtd">The following implementation of the QActive_post_() function defines the "QS Test Probe" with the macro <a class="el" href="qs_8h.html#a9f048034d6f9267e8333dbcd7bb67349">QS_TEST_PROBE_DEF()</a>. This "QS test probe" is subsequently used for fault injection during testing. </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> QActive_post_(<a class="code hl_class" href="struct_q_active.html">QActive</a> * <span class="keyword">const</span> me, ...) {</div>
<div class="line">    . . .</div>
<div class="line">    <span class="comment">// test-probe#1 for faking queue overflow</span></div>
<div class="line">    <a class="code hl_define" href="qs_8h.html#a9f048034d6f9267e8333dbcd7bb67349">QS_TEST_PROBE_DEF</a>(&amp;QActive_post_) <span class="comment">// &lt;== Rule 11.1 violation</span></div>
<div class="line">    <a class="code hl_define" href="qs_8h.html#ad5de5bbcec978159f1ecc64612b8e741">QS_TEST_PROBE_ID</a>(1,</div>
<div class="line">        nFree = 0U;</div>
<div class="line">    )</div>
<div class="line">    . . .</div>
<div class="line">}</div>
<div class="ttc" id="aqs_8h_html_a9f048034d6f9267e8333dbcd7bb67349"><div class="ttname"><a href="qs_8h.html#a9f048034d6f9267e8333dbcd7bb67349">QS_TEST_PROBE_DEF</a></div><div class="ttdeci">#define QS_TEST_PROBE_DEF(fun_)</div><div class="ttdef"><b>Definition</b> <a href="qs_8h_source.html#l00846">qs.h:846</a></div></div>
<div class="ttc" id="aqs_8h_html_ad5de5bbcec978159f1ecc64612b8e741"><div class="ttname"><a href="qs_8h.html#ad5de5bbcec978159f1ecc64612b8e741">QS_TEST_PROBE_ID</a></div><div class="ttdeci">#define QS_TEST_PROBE_ID(id_, code_)</div><div class="ttdef"><b>Definition</b> <a href="qs_8h_source.html#l00852">qs.h:852</a></div></div>
<div class="ttc" id="astruct_q_active_html"><div class="ttname"><a href="struct_q_active.html">QActive</a></div><div class="ttdoc">Active object class (based on the QHsm implementation strategy)</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l00800">qp.h:800</a></div></div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation permit is only granted for the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> macros explicitly listed and traced to this permit UID <b>DVP-QS-MC4-R11_01</b> in the <a class="el" href="qpc_8lnt.html" title="PC-Lint-Plus option file for analysing both QP/C and QP/C Applications">qpc.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a99_DVP-QS-MC4-R20_10" name="a99_DVP-QS-MC4-R20_10"></a> </p>
<h2><a class="anchor" id="DVP-QS-MC4-R20_10"></a>
DVP-QS-MC4-R20_10</h2>
<table class="doxtable">
<tr>
<th>DVP-QS-MC4-R20_10 </th></tr>
<tr style="text-align:left">
<th>Rule 20.10(Advisory): The # and ## preprocessor operators should not be used </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintanability / Testability)</li>
<li>Adopted code integration </li>
</ul>
</td></tr>
<tr>
<td><b>Use-Case</b><br  />
 Deviation from this rule occurs in the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> software tracing instrumentation in the macros producing "dictionary entries". Those "dictionaries" provide the symbolic information to the software tracing system, so that the binary addresses of various objects and functions can be displayed using symbolic names from the program. The stringize and concatenation preprocessor operators are necessary in this case to convent the symbolic names in the program into ASCII strings that can be sent to the host. </td></tr>
<tr>
<td><b>Examples</b><br  />
 The following state-handler for a top-most initial transition in a state machine produces "QS Function Dictionaries" as well as "QS Object Dictionary": <div class="fragment"><div class="line"><a class="code hl_typedef" href="qp_8h.html#aca8402343f1e6379e68bc32d471c3ff1">QState</a> Calc_initial(Calc * <span class="keyword">const</span> me, <span class="keywordtype">void</span> <span class="keyword">const</span> * <span class="keyword">const</span> par) {</div>
<div class="line">    . . .</div>
<div class="line">    <a class="code hl_define" href="qs_8h.html#a3b1ab21c174f2bec448edec8865a8529">QS_FUN_DICTIONARY</a>(&amp;Calc_on);   <span class="comment">// &lt;== Rule 20.10 violation</span></div>
<div class="line">    <a class="code hl_define" href="qs_8h.html#a034206ff7f20a4e6426a5f554434643b">QS_OBJ_DICTIONARY</a>(&amp;Calc_inst); <span class="comment">// &lt;== Rule 20.10 violation</span></div>
<div class="line">    . . .</div>
<div class="ttc" id="aqs_8h_html_a034206ff7f20a4e6426a5f554434643b"><div class="ttname"><a href="qs_8h.html#a034206ff7f20a4e6426a5f554434643b">QS_OBJ_DICTIONARY</a></div><div class="ttdeci">#define QS_OBJ_DICTIONARY(obj_)</div><div class="ttdef"><b>Definition</b> <a href="qs_8h_source.html#l00509">qs.h:509</a></div></div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation permit is only granted for the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> macros explicitly listed and traced to this permit UID <b>DVP-QS-MC4-R20_10</b> in the <a class="el" href="qpc_8lnt.html" title="PC-Lint-Plus option file for analysing both QP/C and QP/C Applications">qpc.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<h1><a class="anchor" id="csc_dvr"></a>
Deviation Records</h1>
<p><a class="el" href="csc_gep.html#csc_dev-rec">Deviation Records</a> in this section document MISRA-C:2023 deviations in the QP/C source code. These deviations are contained in the QP/C code and don't cause deviations in the QP Applications.</p>
<p><a id="a100_DVR-QP-MC4-R08_13" name="a100_DVR-QP-MC4-R08_13"></a> </p>
<h2><a class="anchor" id="DVR-QP-MC4-R08_13"></a>
DVR-QP-MC4-R08_13</h2>
<table class="doxtable">
<tr>
<th>DVR-QP-MC4-R08_13 </th></tr>
<tr style="text-align:left">
<th>Rule 8.13(Advisory): A pointer should point to a const-qualified type whenever possible </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Portability / Adaptability) </li>
</ul>
</td></tr>
<tr>
<td><b>Background</b><br  />
 The QP Framework adheres to the Rule 8.13 quite strictly, with just a few exceptions for <em>portability</em>. Specifically the QP base class <a class="el" href="struct_q_active.html" title="Active object class (based on the QHsm implementation strategy)">QActive</a> defines generic operations (e.g., <code>start()</code>), which need to be implemented in various QP adaptations. Some of these implementations (e.g., in the <a class="el" href="srs_qv.html">QV</a>, <a class="el" href="srs_qk.html">QK</a>, and <a class="el" href="srs_qxk.html">QXK</a> kernels) might use the pointer parameters such that the <code>const</code> qualification would be possible. However, the <code>const</code> qualification would not be applicable for <em>all</em> other QP ports. Therefore, under the restriction of providing one, common API, Rule 8.13 is not followed in the few exceptional cases for reasons of portability and adaptability. </td></tr>
<tr>
<td><b>Examples</b><br  />
 The following code fragment shows the <code>QActive_start_()</code> implementation for the <a class="el" href="srs_qv.html">QV kernel</a>. The function does not use the stack parameters, which in this particular case could be defined <code>const</code>: <div class="fragment"><div class="line"><span class="keywordtype">void</span> QActive_start_(<a class="code hl_class" href="struct_q_active.html">QActive</a> * <span class="keyword">const</span> me,</div>
<div class="line">    <a class="code hl_typedef" href="qp_8h.html#ae1a46223d195c76308751084d23d2d51">QPrioSpec</a> <span class="keyword">const</span> prioSpec,</div>
<div class="line">    <a class="code hl_class" href="struct_q_evt.html">QEvt</a> <span class="keyword">const</span> * * <span class="keyword">const</span> qSto,</div>
<div class="line">    uint_fast16_t <span class="keyword">const</span> qLen,</div>
<div class="line">    <span class="keywordtype">void</span> * <span class="keyword">const</span> stkSto, <span class="comment">// &lt;== could be void const * const stkSto</span></div>
<div class="line">    uint_fast16_t <span class="keyword">const</span> stkSize,</div>
<div class="line">    <span class="keywordtype">void</span> <span class="keyword">const</span> * <span class="keyword">const</span> par)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_define" href="qp_8h.html#a38412fa3c999eeb48624dac1163df663">Q_UNUSED_PAR</a>(stkSto);  <span class="comment">// not needed in QV</span></div>
<div class="line">    . . .</div>
<div class="line">}</div>
<div class="ttc" id="aqp_8h_html_a38412fa3c999eeb48624dac1163df663"><div class="ttname"><a href="qp_8h.html#a38412fa3c999eeb48624dac1163df663">Q_UNUSED_PAR</a></div><div class="ttdeci">#define Q_UNUSED_PAR(par_)</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l00532">qp.h:532</a></div></div>
<div class="ttc" id="aqp_8h_html_ae1a46223d195c76308751084d23d2d51"><div class="ttname"><a href="qp_8h.html#ae1a46223d195c76308751084d23d2d51">QPrioSpec</a></div><div class="ttdeci">uint16_t QPrioSpec</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l00619">qp.h:619</a></div></div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted in the QP functions explicitly listed and traced to this record UID <b>DVR-QP-MC4-R08_13</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a101_DVR-QP-MC4-R11_03C" name="a101_DVR-QP-MC4-R11_03C"></a> </p>
<h2><a class="anchor" id="DVR-QP-MC4-R11_03C"></a>
DVR-QP-MC4-R11_03C</h2>
<table class="doxtable">
<tr>
<th>DVR-QP-MC4-R11_03C </th></tr>
<tr style="text-align:left">
<th>Rule 11.3(Required): A cast shall not be performed between a pointer to object type and a pointer to a different object type (<u>unrelated types</u>) </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Reliability) </li>
</ul>
</td></tr>
<tr>
<td><b>Background</b><br  />
 QP Framework performs casts between unrelated pointer types in the <a class="el" href="srs_qxk.html">blocking QXK kernel</a> to store the blocking object pointers in the exterded thread (<a class="el" href="struct_q_x_thread.html" title="eXtended (blocking) thread of the QXK preemptive kernel">QXThread</a> class) for subsequent integrity checks. These checks are part of the QP Software Self-Monitoring (SSM) and are added for improved reliability. </td></tr>
<tr>
<td><b>Examples</b><br  />
 The following code fragment shows the <code>QActive_start_()</code> implementation for the <a class="el" href="srs_qv.html">QV kernel</a>. The function does not use the stack parameters, which in this particular case could be defined <code>const</code>: <div class="fragment"><div class="line"><span class="keywordtype">bool</span> QXThread_delay(uint_fast16_t <span class="keyword">const</span> nTicks) {</div>
<div class="line">    . . .</div>
<div class="line">    <span class="comment">// the blocking object must be the time event, part of SIS</span></div>
<div class="line">    <a class="code hl_define" href="qsafe_8h.html#a67caf77e096255afd6f5be43327da3da">Q_ENSURE_ID</a>(890, thr-&gt;super.super.temp.obj</div>
<div class="line">                          == <a class="code hl_define" href="qxk_8h.html#ac1c2a755f2e80f4ded28438fa8aab9eb">QXK_PTR_CAST_</a>(<a class="code hl_struct" href="struct_q_m_state.html">QMState</a> <span class="keyword">const</span>*, &amp;thr-&gt;timeEvt));</div>
<div class="line">    thr-&gt;super.super.temp.obj =  (<a class="code hl_struct" href="struct_q_m_state.html">QMState</a> *)0; <span class="comment">// clear</span></div>
<div class="line">    . . .</div>
<div class="line">}</div>
<div class="ttc" id="aqsafe_8h_html_a67caf77e096255afd6f5be43327da3da"><div class="ttname"><a href="qsafe_8h.html#a67caf77e096255afd6f5be43327da3da">Q_ENSURE_ID</a></div><div class="ttdeci">#define Q_ENSURE_ID(id_, expr_)</div><div class="ttdef"><b>Definition</b> <a href="qsafe_8h_source.html#l00139">qsafe.h:139</a></div></div>
<div class="ttc" id="aqxk_8h_html_ac1c2a755f2e80f4ded28438fa8aab9eb"><div class="ttname"><a href="qxk_8h.html#ac1c2a755f2e80f4ded28438fa8aab9eb">QXK_PTR_CAST_</a></div><div class="ttdeci">#define QXK_PTR_CAST_(type_, ptr_)</div><div class="ttdef"><b>Definition</b> <a href="qxk_8h_source.html#l00363">qxk.h:363</a></div></div>
<div class="ttc" id="astruct_q_m_state_html"><div class="ttname"><a href="struct_q_m_state.html">QMState</a></div><div class="ttdoc">State object for the QMsm class (QM State Machine).</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l00239">qp.h:239</a></div></div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted in the internal QP macro <a class="el" href="qxk_8h.html#ac1c2a755f2e80f4ded28438fa8aab9eb">QXK_PTR_CAST_()</a> explicitly listed and traced to this record UID <b>DVR-QP-MC4-R11_03C</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a102_DVR-QP-MC4-R11_04" name="a102_DVR-QP-MC4-R11_04"></a> </p>
<h2><a class="anchor" id="DVR-QP-MC4-R11_04"></a>
DVR-QP-MC4-R11_04</h2>
<table class="doxtable">
<tr>
<th>DVR-QP-MC4-R11_04 </th></tr>
<tr style="text-align:left">
<th>Rule 11.4(Advisory): A conversion should not be performed between a pointer to object and an integer type </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Reliability) </li>
</ul>
</td></tr>
<tr>
<td><b>Background</b><br  />
 The QP Framework code deviates from this <em>advisory</em> rule only to implement Duplicate Inverse Storage (DIS) for critical pointer variables (part of the QP Functional Safety System). The deviation from this rule is encapsulated in the internal macro <a class="el" href="qp__pkg_8h.html#a86c49bdd9c7baa6f27b16b7ea07a15b3">Q_UINTPTR_CAST_()</a>. Specifically, the DIS technique is based on making a duplicate inverted copy of a pointer variable, which requires converting a pointer to integer. </td></tr>
<tr>
<td><b>Examples</b><br  />
 The following example shows how a DIS is calculated and stored, and later how it is used in an assertion to verify the pointer integrity. <div class="fragment"><div class="line"><span class="preprocessor">#ifndef Q_UNSAFE</span></div>
<div class="line">    fb-&gt;next_dis = (uintptr_t)(~<a class="code hl_define" href="qp__pkg_8h.html#a86c49bdd9c7baa6f27b16b7ea07a15b3">Q_UINTPTR_CAST_</a>(fb-&gt;next));</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">    . . .</div>
<div class="line">    <span class="comment">// the free block must have integrity (duplicate inverse storage)</span></div>
<div class="line">    Q_ASSERT_NOCRIT_(302, <a class="code hl_define" href="qp__pkg_8h.html#a86c49bdd9c7baa6f27b16b7ea07a15b3">Q_UINTPTR_CAST_</a>(fb_next)</div>
<div class="line">                          == (uintptr_t)~fb-&gt;next_dis);</div>
<div class="ttc" id="aqp__pkg_8h_html_a86c49bdd9c7baa6f27b16b7ea07a15b3"><div class="ttname"><a href="qp__pkg_8h.html#a86c49bdd9c7baa6f27b16b7ea07a15b3">Q_UINTPTR_CAST_</a></div><div class="ttdeci">#define Q_UINTPTR_CAST_(ptr_)</div><div class="ttdef"><b>Definition</b> <a href="qp__pkg_8h_source.html#l00097">qp_pkg.h:97</a></div></div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted in the internal QP macro <a class="el" href="qp__pkg_8h.html#a86c49bdd9c7baa6f27b16b7ea07a15b3">Q_UINTPTR_CAST_()</a> explicitly listed and traced to this record UID <b>DVR-QP-MC4-R11_04</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file.</li>
<li>The result of the pointer-to-integer conversion should never be converted back to a pointer and thus never dereferenced. </li>
</ul>
</td></tr>
</table>
<p><a id="a103_DVR-QP-MC4-R11_05" name="a103_DVR-QP-MC4-R11_05"></a> </p>
<h2><a class="anchor" id="DVR-QP-MC4-R11_05"></a>
DVR-QP-MC4-R11_05</h2>
<table class="doxtable">
<tr>
<th>DVR-QP-MC4-R11_05 </th></tr>
<tr style="text-align:left">
<th>Rule 11.5(Advisory): A conversion should not be performed from pointer to void into pointer to object </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Functional suitability)</li>
<li>Code quality (Compatibility)</li>
<li>Code quality (Maintainability) </li>
</ul>
</td></tr>
<tr>
<td><b>Background</b><br  />
 The QP Framework code deviates from this <em>advisory</em> rule in a few instances, where a more general mechanism is specialized. For example, QP Framework provides deterministic memory pool (<a class="el" href="struct_q_m_pool.html" title="Native QF Memory Pool.">QMPool</a>), which can be used for allocation of any type of objects. The most natural API for such generic pools is based on <code>void*</code> pointers. At the same time, the generic memory pools are specialized as <em>event pools</em> for allocating mutable events. In that case, the <code>void*</code> pointers must be cast to <code>QEvt*</code> pointers, which violates Rule 11.5. </td></tr>
<tr>
<td><b>Examples</b><br  />
 <div class="fragment"><div class="line"><span class="comment">// cast void* on QEvt*, violates Rule 11.5(A)</span></div>
<div class="line"><span class="preprocessor">#define QF_EPOOL_GET_(p_, e_, m_, qsId_) \</span></div>
<div class="line"><span class="preprocessor">    ((e_) = (QEvt *)QMPool_get(&amp;(p_), (m_), (qsId_)))</span></div>
<div class="line">. . .</div>
<div class="line">QEvt * QF_newX_(</div>
<div class="line">    . . .</div>
<div class="line">    <a class="code hl_define" href="qk_8h.html#aff4cc890cc5f51428a2357dedf782343">QF_EPOOL_GET_</a>(QF_ePool_[idx], e,</div>
<div class="line">                  ((margin != <a class="code hl_define" href="qp_8h.html#a3c1957439cb1ecff92be7b7401bf3159">QF_NO_MARGIN</a>) ? margin : 0U), 0U);</div>
<div class="line">    . . .</div>
<div class="line">    <span class="keywordflow">return</span> e;</div>
<div class="line">}</div>
<div class="ttc" id="aqk_8h_html_aff4cc890cc5f51428a2357dedf782343"><div class="ttname"><a href="qk_8h.html#aff4cc890cc5f51428a2357dedf782343">QF_EPOOL_GET_</a></div><div class="ttdeci">#define QF_EPOOL_GET_(p_, e_, m_, qsId_)</div><div class="ttdef"><b>Definition</b> <a href="qk_8h_source.html#l00207">qk.h:207</a></div></div>
<div class="ttc" id="aqp_8h_html_a3c1957439cb1ecff92be7b7401bf3159"><div class="ttname"><a href="qp_8h.html#a3c1957439cb1ecff92be7b7401bf3159">QF_NO_MARGIN</a></div><div class="ttdeci">#define QF_NO_MARGIN</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l01154">qp.h:1154</a></div></div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted in the instances explicitly listed and traced to this record UID <b>DVR-QP-MC4-R11_05</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a104_DVR-QP-MC4-R11_08" name="a104_DVR-QP-MC4-R11_08"></a> </p>
<h2><a class="anchor" id="DVR-QP-MC4-R11_08"></a>
DVR-QP-MC4-R11_08</h2>
<table class="doxtable">
<tr>
<th>DVR-QP-MC4-R11_08 </th></tr>
<tr style="text-align:left">
<th>Rule 11.8(Required): A cast shall not remove any 'const' or 'volatile' qualification from the type pointer to by a pointer </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Reliability)</li>
<li>Code quality (Functional suitability) </li>
</ul>
</td></tr>
<tr>
<td><b>Background</b><br  />
 QP Framework code deviates from this rule only in the internal (inline) functions <a class="el" href="struct_q_evt.html#a5e2d01e6302a34ec2cf9fa0c0870fcae">QEvt_refCtr_inc_()</a>, <a class="el" href="struct_q_evt.html#a21b810f5173829453464fa9c59f890f6">QEvt_refCtr_dec_()</a>, and the public function <a class="el" href="class_q_f.html#abecfdda560a1daca1a74ebf23debc5b7">QF_gc()</a>, where the const qualification of pointers to <a class="el" href="struct_q_evt.html" title="Event class.">QEvt</a> needs to be occasionally discarded. The discarding of const is always preceded by ensuring that a given event is indeed mutable (by testing the <a class="el" href="struct_q_evt.html#a6995c25983eaf7f37e33024cff480d4e">QEvt.evtTag_</a> member). Deviation from this rule is considered a better tradeoff for safety and design correctness than not using the const qualification for event pointers at all. </td></tr>
<tr>
<td><b>Examples</b><br  />
 <div class="fragment"><div class="line"><span class="keywordtype">void</span> QF_gc(<a class="code hl_class" href="struct_q_evt.html">QEvt</a> <span class="keyword">const</span> * <span class="keyword">const</span> e) {</div>
<div class="line">    . . .</div>
<div class="line">    <span class="comment">// cast &#39;const&#39; away, which is OK, because it&#39;s a pool event</span></div>
<div class="line">    <a class="code hl_define" href="qk_8h.html#ae2f94361de3dd8a07cced843879270f2">QF_EPOOL_PUT_</a>(QF_ePool_[poolNum - 1U], (<a class="code hl_class" href="struct_q_evt.html">QEvt</a> *)e, 0U);</div>
<div class="line">    . . .</div>
<div class="line">}</div>
<div class="ttc" id="aqk_8h_html_ae2f94361de3dd8a07cced843879270f2"><div class="ttname"><a href="qk_8h.html#ae2f94361de3dd8a07cced843879270f2">QF_EPOOL_PUT_</a></div><div class="ttdeci">#define QF_EPOOL_PUT_(p_, e_, qsId_)</div><div class="ttdef"><b>Definition</b> <a href="qk_8h_source.html#l00211">qk.h:211</a></div></div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted in the instances explicitly listed and traced to this record UID <b>DVR-QP-MC4-R11_08</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a105_DVR-QS-MC4-R14_03" name="a105_DVR-QS-MC4-R14_03"></a> </p>
<h2><a class="anchor" id="DVR-QS-MC4-R14_03"></a>
DVR-QS-MC4-R14_03</h2>
<table class="doxtable">
<tr>
<th>DVR-QS-MC4-R14_03 </th></tr>
<tr style="text-align:left">
<th>Rule 14.3(Required): Controlling expressions shall not be invariant </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintainability, Testability) </li>
</ul>
</td></tr>
<tr>
<td><b>Background</b><br  />
 The <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> instrumentation deviates from this rule in the macros QS_BEGIN_PRE_() and QS_BEGIN_NOCRIT_PRE_() in the <em>inactive</em> versions of these macros (when <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> instrumentation is disabled). </td></tr>
<tr>
<td><b>Examples</b><br  />
 The following example shows the <em>inactive</em> definitions of the macros QS_BEGIN_PRE_(), and QS_BEGIN_NOCRIT_PRE_(). <div class="fragment"><div class="line"><span class="comment">// file qs_dummy.h</span></div>
<div class="line">. . .</div>
<div class="line">#define QS_BEGIN_PRE_(rec_, qsId_) <span class="keywordflow">if</span> (<span class="keyword">false</span>) {</div>
<div class="line"><span class="preprocessor">#define QS_BEGIN_NOCRIT_PRE_(rec_, qsId_) if (false) {</span></div>
<div class="line">. . .</div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation permit is only granted for the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> macros QS_BEGIN_PRE_() and QS_BEGIN_NOCRIT_PRE_() explicitly listed and traced to this permit UID <b>DVR-QS-MC4-R14_03</b> in the <a class="el" href="qpc_8lnt.html" title="PC-Lint-Plus option file for analysing both QP/C and QP/C Applications">qpc.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a106_DVP-QS-MC4-R15_05" name="a106_DVP-QS-MC4-R15_05"></a> </p>
<h2><a class="anchor" id="DVP-QS-MC4-R15_05"></a>
DVP-QS-MC4-R15_05</h2>
<table class="doxtable">
<tr>
<th>DVP-QS-MC4-R15_05 </th></tr>
<tr style="text-align:left">
<th>Rule 15.5(Advisory): A function should have a single point of exit at the end </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintanability / Testability)</li>
<li>Adopted code integration </li>
</ul>
</td></tr>
<tr>
<td><b>Background</b><br  />
 Deviation from this rule occurs only in the QS/QUTest software tracing and testing instrumentation. Specifically, an additional return occurs when events are posted to the <a class="el" href="struct_q_active_dummy.html" title="Dummy Active Object for testing.">QActiveDummy</a> test-double or the <a class="el" href="qs_8h.html#ad4d6a7778df089bb64202ba9ec8a4ddb">QS_TEST_PROBE()</a> macro used. The justification is that such additional return point is used only for temporarily altering the CUT (Code Under Test) when a test-double it used or for error injection (e.g., to return a specific error to the caller.) </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted in the QS/QUTest software tracing functions and macros explicitly listed and traced to this permit UID <b>DVP-QS-MC4-R15_05</b> in the <a class="el" href="qpc_8lnt.html" title="PC-Lint-Plus option file for analysing both QP/C and QP/C Applications">qpc.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a107_DVR-QP-MC4-R18_03" name="a107_DVR-QP-MC4-R18_03"></a> </p>
<h2><a class="anchor" id="DVR-QP-MC4-R18_03"></a>
DVR-QP-MC4-R18_03</h2>
<table class="doxtable">
<tr>
<th>DVR-QP-MC4-R18_03 </th></tr>
<tr style="text-align:left">
<th>Rule 18.3(Required): The relation operators shall not be applied to objects of pointer type except where they point into the same array </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Reliability) </li>
</ul>
</td></tr>
<tr>
<td><b>Background</b><br  />
 Deviation from this rule occurs in the assertions in the <a class="el" href="struct_q_m_pool.html#a18626b650292411144a28efaa63f98cd">QMPool_get()</a> and <a class="el" href="struct_q_m_pool.html#a1718343a1983d14099580f3660300630">QMPool_put()</a> operations. The assertions check that the pointer to a memory block indeed comes from the memory pool by range-checking the pointer. If the block belongs to the pool, the pointer comparison is made within the same array, so the rule is actually not violated. The transgression occurs only if the block pointer is not in range. The assertions of pointer range proved to be very valuable in ensuring the system integrity and in this particular context the benefits outweigh the risk of deviating from the MISRA rule. </td></tr>
<tr>
<td><b>Examples</b><br  />
 <div class="fragment"><div class="line"> <span class="comment">// NOTE: The next free block pointer can fall out of range</span></div>
<div class="line"> <span class="comment">// when the client code writes past the memory block, thus</span></div>
<div class="line"> <span class="comment">// corrupting the next block.</span></div>
<div class="line"> Q_ASSERT_NOCRIT_(330,</div>
<div class="line">     (me-&gt;start &lt;= fb_next) &amp;&amp; (fb_next &lt;= me-&gt;end));</div>
<div class="line">. . .</div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted in the the <a class="el" href="struct_q_m_pool.html#a18626b650292411144a28efaa63f98cd">QMPool_get()</a> and <a class="el" href="struct_q_m_pool.html#a1718343a1983d14099580f3660300630">QMPool_put()</a> operations explicitly listed and traced to this record UID <b>DVR-QP-MC4-R18_03</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<h1><a class="anchor" id="csc_dvr-qs"></a>
Deviation Records for QS</h1>
<p>This section presents <a class="el" href="csc_gep.html#csc_dev-rec">Deviation Records</a> for <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> software tracing and testing (QP/Spy and QUTest) and instrumentation built into the QP Framework.</p>
<dl class="section attention"><dt>Attention</dt><dd>In <b>safety-related</b> QP Application code as configured for the product release, the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> software tracing shall be <b>inactive</b> (the macro <a class="el" href="cmd__options_8dox.html#a668b5df6d955d0b1c77227192078689b" title="The preprocessor switch to activate the QS software tracing instrumentation in QP/C and application c...">Q_SPY</a> shall NOT be defined). In that case, the deviations cased by the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> tracing instrumentation are NOT present.</dd></dl>
<p><a id="a108_DVR-QS-MC4-R08_13" name="a108_DVR-QS-MC4-R08_13"></a> </p>
<h2><a class="anchor" id="DVR-QS-MC4-R08_13"></a>
DVR-QS-MC4-R08_13</h2>
<table class="doxtable">
<tr>
<th>DVR-QS-MC4-R08_13 </th></tr>
<tr style="text-align:left">
<th>Rule 8.13(Advisory): A pointer should point to a const-qualified type whenever possible </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintainability, Testability) </li>
</ul>
</td></tr>
<tr>
<td><b>Background</b><br  />
 The deviations from this <em>advisory</em> rule occur only in the QUTest instrumentation, in the "dummy" test-doubles, sucha as: <a class="el" href="struct_q_hsm_dummy.html" title="Dummy HSM class for testing.">QHsmDummy</a> and <a class="el" href="struct_q_active_dummy.html" title="Dummy Active Object for testing.">QActiveDummy</a>. The reasons are similar as in <a class="el" href="csc_dev.html#DVR-QP-MC4-R08_13">DVR-QP-MC4-R08_13</a>. Specifically the "dummy" test doubles implement the generic <a class="el" href="class_q_f.html" title="QF Active Object Framework (QF namespace emulated as a &quot;class&quot; in C)">QF</a> API such that the <code>const</code> qualification would be possible. However, the <code>const</code> qualification would not be applicable for <em>all</em> other QP ports. Therefore, under the restriction of providing one, common API, Rule 8.13 cannot be followed for the "dummy" test doubles. </td></tr>
<tr>
<td><b>Examples</b><br  />
 <div class="fragment"><div class="line"><span class="keywordtype">void</span> QHsmDummy_dispatch_(</div>
<div class="line">    <a class="code hl_class" href="struct_q_hsm.html">QHsm</a> * <span class="keyword">const</span> me,</div>
<div class="line">    <a class="code hl_class" href="struct_q_evt.html">QEvt</a> <span class="keyword">const</span> * <span class="keyword">const</span> e,</div>
<div class="line">    uint_fast8_t <span class="keyword">const</span> qsId)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// NOTE: all parameters could be &#39;const&#39; in this &quot;dummy&quot; implementation</span></div>
<div class="line">    . . .</div>
<div class="line">}</div>
<div class="ttc" id="astruct_q_hsm_html"><div class="ttname"><a href="struct_q_hsm.html">QHsm</a></div><div class="ttdoc">Hierarchical State Machine class (QHsm-style state machine implementation strategy)</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l00313">qp.h:313</a></div></div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted in the <a class="el" href="struct_q_hsm_dummy.html#a82f009bb4265e20a61ddb42b70639584">QHsmDummy_init_()</a>,<a class="el" href="struct_q_hsm_dummy.html#a398dfa6e03af938f83e20755545af804">QHsmDummy_dispatch_()</a>, <a class="el" href="struct_q_active_dummy.html#a309ff0e3a9cb920d1655ecb1352d211b">QActiveDummy_init_()</a>, and <a class="el" href="struct_q_active_dummy.html#a1588ba8146aeb0732dfd4a72ef18e0ed">QActiveDummy_dispatch_()</a> operations explicitly listed and traced to this record UID <b>DVR-QS-MC4-R08_13</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a109_DVR-QS-MC4-R11_03C" name="a109_DVR-QS-MC4-R11_03C"></a> </p>
<h2><a class="anchor" id="DVR-QS-MC4-R11_03C"></a>
DVR-QS-MC4-R11_03C</h2>
<table class="doxtable">
<tr>
<th>DVR-QS-MC4-R11_03C </th></tr>
<tr style="text-align:left">
<th>Rule 11.3(Required): A cast shall not be performed between a pointer to object type and a pointer to a different object type (<u>unrelated objects</u>) </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintainability, Testability) </li>
</ul>
</td></tr>
<tr>
<td><b>Background</b><br  />
 The <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> instrumentation deviates from this rule in the files <a href="qs__rx_8c.html">qs_rx.c</a> and <a href="qutest_8c.html">qutest.c</a>, where a generic array of <code>void*</code> pointers to "current objects" is cast to specific objects to execute the external commands (see also <a class="el" href="csc_dev.html#DVR-QS-MC4-R11_05">DVR-QS-MC4-R11_05</a>). </td></tr>
<tr>
<td><b>Examples</b><br  />
 The following code fragment shows the <code>QActiveDummy_init_()</code> implementation performs a downcast from the <code>QHsm*</code> base class to the <code>QActive*</code> subclass: <div class="fragment"><div class="line"><span class="keywordtype">void</span> QActiveDummy_init_(</div>
<div class="line">    <a class="code hl_class" href="struct_q_hsm.html">QHsm</a> * <span class="keyword">const</span> me,</div>
<div class="line">    <span class="keywordtype">void</span> <span class="keyword">const</span> * <span class="keyword">const</span> par,</div>
<div class="line">    uint_fast8_t <span class="keyword">const</span> qsId)</div>
<div class="line">{</div>
<div class="line">    . . .</div>
<div class="line">    QHsmDummy_init_(me, par, ((<a class="code hl_class" href="struct_q_active.html">QActive</a> <span class="keyword">const</span> *)me)-&gt;prio); <span class="comment">// &lt;==</span></div>
<div class="line">}</div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted in the internal QP macro <a class="el" href="qxk_8h.html#ac1c2a755f2e80f4ded28438fa8aab9eb">QXK_PTR_CAST_()</a> explicitly listed and traced to this record UID <b>DVR-QP-MC4-R11_03C</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a110_DVR-QS-MC4-R11_04" name="a110_DVR-QS-MC4-R11_04"></a> </p>
<h2><a class="anchor" id="DVR-QS-MC4-R11_04"></a>
DVR-QS-MC4-R11_04</h2>
<table class="doxtable">
<tr>
<th>DVR-QS-MC4-R11_04 </th></tr>
<tr style="text-align:left">
<th>Rule 11.4(Advisory): A conversion should not be performed between a pointer to object and an integer type </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintainability, Testability) </li>
</ul>
</td></tr>
<tr>
<td><b>Background</b><br  />
 The <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> instrumentation deviates from this rule in the code that <b>serializes</b> pointers. In all such type of code, the binary addresses are sent as integeres and casting from integers to pointers is unavoidable. </td></tr>
<tr>
<td><b>Examples</b><br  />
 The following example shows internal function to serialize object pointers. <div class="fragment"><div class="line"><span class="comment">// file qs.c</span></div>
<div class="line"><span class="keywordtype">void</span> QS_obj_raw_(<span class="keywordtype">void</span> <span class="keyword">const</span> * <span class="keyword">const</span> obj) {</div>
<div class="line"><span class="preprocessor">    #if (QS_OBJ_PTR_SIZE == 1U)</span></div>
<div class="line">        QS_u8_raw_((uint8_t)obj);   <span class="comment">// &lt;===</span></div>
<div class="line"><span class="preprocessor">    #elif (QS_OBJ_PTR_SIZE == 2U)</span></div>
<div class="line">        QS_u16_raw_((uint16_t)obj); <span class="comment">// &lt;===</span></div>
<div class="line"><span class="preprocessor">    #elif (QS_OBJ_PTR_SIZE == 4U)</span></div>
<div class="line">        QS_u32_raw_((uint32_t)obj); <span class="comment">// &lt;===</span></div>
<div class="line"><span class="preprocessor">    #elif (QS_OBJ_PTR_SIZE == 8U)</span></div>
<div class="line">        QS_u64_raw_((uint64_t)obj); <span class="comment">// &lt;===</span></div>
<div class="line"><span class="preprocessor">    #else</span></div>
<div class="line">        QS_u32_raw_((uint32_t)obj); <span class="comment">// &lt;===</span></div>
<div class="line"><span class="preprocessor">    #endif</span></div>
<div class="line">}</div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted in the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> macros and functions explicitly listed and traced to this record UID <b>DVR-QS-MC4-R11_06</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a111_DVR-QS-MC4-R11_05" name="a111_DVR-QS-MC4-R11_05"></a> </p>
<h2><a class="anchor" id="DVR-QS-MC4-R11_05"></a>
DVR-QS-MC4-R11_05</h2>
<table class="doxtable">
<tr>
<th>DVR-QS-MC4-R11_05 </th></tr>
<tr style="text-align:left">
<th>Rule 11.5(Advisory): A conversion should not be performed from pointer to void into pointer to object </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintainability, Testability) </li>
</ul>
</td></tr>
<tr>
<td><b>Background</b><br  />
 The <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> instrumentation deviates from this <em>advisory</em> rule in the files <a href="qs__rx_8c.html">qs_rx.c</a> and <a href="qutest_8c.html">qutest.c</a>, where a generic array of <code>void*</code> pointers "current objects" is cast to specific objects to execute the external commands. </td></tr>
<tr>
<td><b>Examples</b><br  />
 <div class="fragment"><div class="line"><span class="comment">// file qutest.c</span></div>
<div class="line"><span class="keywordtype">void</span> QS_rxHandleGoodFrame_(uint8_t <span class="keyword">const</span> state) {</div>
<div class="line">    . . .</div>
<div class="line">    <a class="code hl_class" href="struct_q_hsm.html">QHsm</a> * <span class="keyword">const</span> hsm = (<a class="code hl_class" href="struct_q_hsm.html">QHsm</a> *)QS_rxPriv_.currObj[<a class="code hl_enumvalue" href="qs_8h.html#a3ee4a3be50e7ffe79821a8c015afaff7">SM_OBJ</a>]; <span class="comment">// &lt;===</span></div>
<div class="line">    . . .</div>
<div class="line">}</div>
<div class="ttc" id="aqs_8h_html_a3ee4a3be50e7ffe79821a8c015afaff7"><div class="ttname"><a href="qs_8h.html#a3ee4a3be50e7ffe79821a8c015afaff7">SM_OBJ</a></div><div class="ttdeci">@ SM_OBJ</div><div class="ttdoc">state machine object</div><div class="ttdef"><b>Definition</b> <a href="qs_8h_source.html#l00960">qs.h:960</a></div></div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted in the files <a href="qs__rx_8c.html">qs_rx.c</a> and <a href="qutest_8c.html">qutest.c</a> explicitly listed and traced to this record UID <b>DVR-QS-MC4-R11_05</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a112_DVR-QS-MC4-R11_06" name="a112_DVR-QS-MC4-R11_06"></a> </p>
<h2><a class="anchor" id="DVR-QS-MC4-R11_06"></a>
DVR-QS-MC4-R11_06</h2>
<table class="doxtable">
<tr>
<th>DVR-QS-MC4-R11_06 </th></tr>
<tr style="text-align:left">
<th>Rule 11.6(Required): A cast shall not be performed between pointer to void and an arithmetic type </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintainability, Testability) </li>
</ul>
</td></tr>
<tr>
<td><b>Background</b><br  />
 The <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> instrumentation deviates from this rule in the code that <b>serializes</b>. In all such type of code, the binary addresses are sent as integeres and casting from pointers to integers is unavoidable (see also <a class="el" href="csc_dev.html#DVR-QS-MC4-R11_04">DVR-QS-MC4-R11_04</a>). </td></tr>
<tr>
<td><b>Examples</b><br  />
 The following example shows internal function to serialize object pointers. <div class="fragment"><div class="line"><span class="comment">// file qutest.c</span></div>
<div class="line">uint32_t QS_getTestProbe_(QSpyFunPtr <span class="keyword">const</span> api) {</div>
<div class="line">    . . .</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0U; i &lt; QS_testData.tpNum; ++i) {</div>
<div class="line">        . . .</div>
<div class="line">        <span class="keywordflow">if</span> (QS_testData.tpBuf[i].addr == (QSFun)api) { <span class="comment">// &lt;===</span></div>
<div class="line">            . . .</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    . . .</div>
<div class="line">}</div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted in the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> macros and functions explicitly listed and traced to this record UID <b>DVR-QS-MC4-R11_06</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a113_DVR-QS-MC4-R19_02" name="a113_DVR-QS-MC4-R19_02"></a> </p>
<h2><a class="anchor" id="DVR-QS-MC4-R19_02"></a>
DVR-QS-MC4-R19_02</h2>
<table class="doxtable">
<tr>
<th>DVR-QS-MC4-R19_02 </th></tr>
<tr style="text-align:left">
<th>Rule 19.2(Advisory): The union keyword should not be used<ul>
<li>Code quality (Maintainability, Testability) </li>
</ul>
</th></tr>
<tr>
<td><b>Background</b><br  />
 The <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> instrumentation deviates from this rule in the internal functions <code>QS_f32_fmt_()</code> and <code>QS_f64_fmt_()</code> for <b>serialization</b> of floating point numbers. Specifically, the unions are used to obtain the binary representation of floating point numbers, which then can be serialized as a sequence of bytes. </td></tr>
<tr>
<td><b>Examples</b><br  />
 The following example shows a union that holds a 32-bit float and 32-bit integer for obtaining the binary representation of the float. <div class="fragment"><div class="line"><span class="comment">// file qs_fp.c</span></div>
<div class="line"><span class="keywordtype">void</span> QS_f32_fmt_(</div>
<div class="line">    uint8_t <span class="keyword">const</span> format,</div>
<div class="line">    <a class="code hl_typedef" href="qp_8h.html#a80dc9595c3622306ecabb5a1cbededaa">float32_t</a> <span class="keyword">const</span> d)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">union </span>F32Rep {</div>
<div class="line">        <a class="code hl_typedef" href="qp_8h.html#a80dc9595c3622306ecabb5a1cbededaa">float32_t</a> f;</div>
<div class="line">        uint32_t  u;</div>
<div class="line">    } fu32;  <span class="comment">// the internal binary representation</span></div>
<div class="line">    . . .</div>
<div class="line">}</div>
<div class="ttc" id="aqp_8h_html_a80dc9595c3622306ecabb5a1cbededaa"><div class="ttname"><a href="qp_8h.html#a80dc9595c3622306ecabb5a1cbededaa">float32_t</a></div><div class="ttdeci">float float32_t</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l00112">qp.h:112</a></div></div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted in the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> the internal functions <code>QS_f32_fmt_()</code> and <code>QS_f64_fmt_()</code> explicitly listed and traced to this record UID <b>DVR-QS-MC4-R19_02</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<h1><a class="anchor" id="csc_dvp-pclp"></a>
Deviation Permits for PCLP</h1>
<p>The deviation permits in this section are for additional diagnostics generated by the PCLP static analysis tool that go beyond MISRA-C:2023. The purpose of these permits is to allow suppressing these diagnostics in the QP Application code, so that the application code passes cleanly analysis with PCLP. Of course, the diagnostic suppression is only contextual, and the PCLP diagnostics is in force for all other contexts.</p>
<p><a id="a114_DVP-QS-PCLP-641" name="a114_DVP-QS-PCLP-641"></a> </p>
<h2><a class="anchor" id="DVP-QS-PCLP-641"></a>
DVP-QS-PCLP-641</h2>
<table class="doxtable">
<tr>
<th>DVP-QS-PCLP-641 </th></tr>
<tr style="text-align:left">
<th>Implicit conversion of enum to integral type int </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintainability, Testability) </li>
</ul>
</td></tr>
<tr>
<td><b>Use-Case</b><br  />
 PCLP generates this diagnostics in the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> tracing instrumentation, in the macro <a class="el" href="qs_8h.html#a9a8e26a01678f160bf35fd0bda6bfe8b">QS_SIG_DICTIONARY()</a>. This macro generates the symbolic information (so called "dictionary") for the provided event signal. For the ease of maintenance, signals are generally specified as enumerations, so the <a class="el" href="qs_8h.html#a9a8e26a01678f160bf35fd0bda6bfe8b">QS_SIG_DICTIONARY()</a> macro must perform casting from enum to integral type. </td></tr>
<tr>
<td><b>Examples</b><br  />
 <div class="fragment"><div class="line"><a class="code hl_typedef" href="qp_8h.html#aca8402343f1e6379e68bc32d471c3ff1">QState</a> MyAO_initial(Table * <span class="keyword">const</span> me, <a class="code hl_class" href="struct_q_evt.html">QEvt</a> <span class="keyword">const</span> *) {</div>
<div class="line">    . . .</div>
<div class="line">    <span class="comment">// signals for the state machine &quot;me&quot;...</span></div>
<div class="line">    <a class="code hl_define" href="qs_8h.html#a9a8e26a01678f160bf35fd0bda6bfe8b">QS_SIG_DICTIONARY</a>(DONE_SIG,   me); <span class="comment">// &lt;==</span></div>
<div class="line">    . . .</div>
<div class="line">}</div>
<div class="ttc" id="aqs_8h_html_a9a8e26a01678f160bf35fd0bda6bfe8b"><div class="ttname"><a href="qs_8h.html#a9a8e26a01678f160bf35fd0bda6bfe8b">QS_SIG_DICTIONARY</a></div><div class="ttdeci">#define QS_SIG_DICTIONARY(sig_, obj_)</div><div class="ttdef"><b>Definition</b> <a href="qs_8h_source.html#l00505">qs.h:505</a></div></div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted in the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> the <a class="el" href="qs_8h.html#a9a8e26a01678f160bf35fd0bda6bfe8b">QS_SIG_DICTIONARY()</a> macro explicitly listed and traced to this record UID <b>DVP-QS-PCLP-641</b> in the <a class="el" href="qpc_8lnt.html" title="PC-Lint-Plus option file for analysing both QP/C and QP/C Applications">qpc.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a115_DVP-QP-PCLP-823" name="a115_DVP-QP-PCLP-823"></a> </p>
<h2><a class="anchor" id="DVP-QP-PCLP-823"></a>
DVP-QP-PCLP-823</h2>
<table class="doxtable">
<tr>
<th>DVP-QP-PCLP-823 </th></tr>
<tr style="text-align:left">
<th>Definition of macro ends in semicolon </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Reliability) </li>
</ul>
</td></tr>
<tr>
<td><b>Use-Case</b><br  />
 PCLP generates this diagnostics in the macros Q_DEFINE_THIS_MODULE() and Q_DEFINE_THIS_FILE() used in QP assertions. These macros define a single copy of a module name string (at the file scope). If these macros would not end in semicolon, the semicolon would have to be provided externally. However, this wouild be a problem in case assertions are disabled because then a single semicolon would be syntactically incorrect at the top of a C source file. </td></tr>
<tr>
<td><b>Examples</b><br  />
 <div class="fragment"><div class="line"><span class="comment">// file main.c</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="qpc_8h.html">qpc.h</a>&quot;</span></div>
<div class="line">. . .</div>
<div class="line">Q_DEFINE_THIS_MODULE(<span class="stringliteral">&quot;main&quot;</span>)</div>
<div class="line">. . .</div>
<div class="ttc" id="aqpc_8h_html"><div class="ttname"><a href="qpc_8h.html">qpc.h</a></div><div class="ttdoc">QP/C interface including the backwards-compatibility layer.</div></div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted in the macros Q_DEFINE_THIS_MODULE() and Q_DEFINE_THIS_FILE() explicitly listed and traced to this record UID <b>DVP-QP-PCLP-823</b> in the <a class="el" href="qpc_8lnt.html" title="PC-Lint-Plus option file for analysing both QP/C and QP/C Applications">qpc.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a116_DVP-QS-PCLP-823" name="a116_DVP-QS-PCLP-823"></a> </p>
<h2><a class="anchor" id="DVP-QS-PCLP-823"></a>
DVP-QS-PCLP-823</h2>
<table class="doxtable">
<tr>
<th>DVP-QS-PCLP-823 </th></tr>
<tr style="text-align:left">
<th>Definition of macro ends in semicolon </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintainability, Testability) </li>
</ul>
</td></tr>
<tr>
<td><b>Use-Case</b><br  />
 PCLP generates this diagnostics in the macro <a class="el" href="qs_8h.html#a9f048034d6f9267e8333dbcd7bb67349">QS_TEST_PROBE_DEF()</a> used in QUTest testing harness. This macro defines a generic "test probe" and if it would not end in semicolon, the semicolon would have to be provided externally. However, this wouild be a problem in case testing is disabled because then a single semicolon would be syntactically incorrect at the top of a C source file. </td></tr>
<tr>
<td><b>Examples</b><br  />
 <div class="fragment"><div class="line"><span class="keyword">static</span> uint32_t myFun(<span class="keywordtype">void</span>) {</div>
<div class="line">    <a class="code hl_define" href="qs_8h.html#a9f048034d6f9267e8333dbcd7bb67349">QS_TEST_PROBE_DEF</a>(&amp;myFun) <span class="comment">// &lt;==</span></div>
<div class="line">    <a class="code hl_define" href="qs_8h.html#ad4d6a7778df089bb64202ba9ec8a4ddb">QS_TEST_PROBE</a>(</div>
<div class="line">        <span class="keywordflow">return</span> qs_tp_;</div>
<div class="line">    )</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aqs_8h_html_ad4d6a7778df089bb64202ba9ec8a4ddb"><div class="ttname"><a href="qs_8h.html#ad4d6a7778df089bb64202ba9ec8a4ddb">QS_TEST_PROBE</a></div><div class="ttdeci">#define QS_TEST_PROBE(code_)</div><div class="ttdef"><b>Definition</b> <a href="qs_8h_source.html#l00849">qs.h:849</a></div></div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted in the macro <a class="el" href="qs_8h.html#a9f048034d6f9267e8333dbcd7bb67349">QS_TEST_PROBE_DEF()</a> explicitly listed and traced to this record UID <b>DVP-QS-PCLP-823</b> in the <a class="el" href="qpc_8lnt.html" title="PC-Lint-Plus option file for analysing both QP/C and QP/C Applications">qpc.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a117_DVP-QP-PCLP-826" name="a117_DVP-QP-PCLP-826"></a> </p>
<h2><a class="anchor" id="DVP-QP-PCLP-826"></a>
DVP-QP-PCLP-826</h2>
<table class="doxtable">
<tr>
<th>DVP-QP-PCLP-826 </th></tr>
<tr style="text-align:left">
<th>Suspicious pointer-to-pointer conversion (area too small) </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintainablity) </li>
</ul>
</td></tr>
<tr>
<td><b>Use-Case</b><br  />
 PCLP generates this diagnostics in the macros <a class="el" href="qp_8h.html#a9f117cb1bc50e9ef4dcc933533ccdd7f">Q_EVT_CAST()</a>, <a class="el" href="qp_8h.html#ab7c56990d949c8708e3fe2b737f2e65c">QACTIVE_POST()</a>, <a class="el" href="qp_8h.html#a766856b24aa5163b7ca90bc3432f1e3e">QACTIVE_POST_X()</a>, <a class="el" href="qp_8h.html#a2f94b69fa7148180c19d501ce2ee7032">QACTIVE_POST_LIFO()</a>, <a class="el" href="qp_8h.html#a85513d80fc73d015efff2596428e4703">Q_NEW()</a>, and <a class="el" href="qp_8h.html#a9da2c27f98ee35a75caeec5710bafb8a">Q_NEW_X()</a>. The reason seems to be the downcast of the superclass pointers (e.g., <code>QEvt*</code>) to specific subclasses (e.g., <code>ReminderEvt*</code>). </td></tr>
<tr>
<td><b>Examples</b><br  />
 <div class="fragment"><div class="line"><span class="comment">// state-handler function</span></div>
<div class="line"><a class="code hl_typedef" href="qp_8h.html#aca8402343f1e6379e68bc32d471c3ff1">QState</a> MyActive_active(MyActive * <span class="keyword">const</span> me, <a class="code hl_class" href="struct_q_evt.html">QEvt</a> <span class="keyword">const</span> * <span class="keyword">const</span> e) {</div>
<div class="line">    <a class="code hl_typedef" href="qp_8h.html#aca8402343f1e6379e68bc32d471c3ff1">QState</a> status_;</div>
<div class="line">    <span class="keywordflow">switch</span> (e-&gt;<a class="code hl_variable" href="struct_q_evt.html#adc58f5661f94c8bb22bf632afa41a804">sig</a>) {</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="qp_8h.html#aa83d0862db97a1ad1d529cc08ac8e1dcac286909dd59290d1076b51d4cfdfaefe">Q_ENTRY_SIG</a>: {</div>
<div class="line">            ReminderEvt *reminder = <a class="code hl_define" href="qp_8h.html#a85513d80fc73d015efff2596428e4703">Q_NEW</a>(ReminderEvt, CRUNCH_SIG); <span class="comment">// &lt;==</span></div>
<div class="line">            . . .</div>
<div class="line">            status_ = <a class="code hl_define" href="qp_8h.html#a54b2da5e70ef983cfa7ca74deac237a3">Q_HANDLED</a>();</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">//${Components::Cruncher::SM::processing::CRUNCH}</span></div>
<div class="line">        <span class="keywordflow">case</span> CRUNCH_SIG: {</div>
<div class="line">            uint32_t i = <a class="code hl_define" href="qp_8h.html#a9f117cb1bc50e9ef4dcc933533ccdd7f">Q_EVT_CAST</a>(ReminderEvt)-&gt;iter; <span class="comment">// &lt;==</span></div>
<div class="line">            . . .</div>
<div class="line">            status_ = <a class="code hl_define" href="qp_8h.html#a54b2da5e70ef983cfa7ca74deac237a3">Q_HANDLED</a>();</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aqp_8h_html_a54b2da5e70ef983cfa7ca74deac237a3"><div class="ttname"><a href="qp_8h.html#a54b2da5e70ef983cfa7ca74deac237a3">Q_HANDLED</a></div><div class="ttdeci">#define Q_HANDLED()</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l00514">qp.h:514</a></div></div>
<div class="ttc" id="aqp_8h_html_a85513d80fc73d015efff2596428e4703"><div class="ttname"><a href="qp_8h.html#a85513d80fc73d015efff2596428e4703">Q_NEW</a></div><div class="ttdeci">#define Q_NEW(evtT_, sig_,...)</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l01167">qp.h:1167</a></div></div>
<div class="ttc" id="aqp_8h_html_aa83d0862db97a1ad1d529cc08ac8e1dcac286909dd59290d1076b51d4cfdfaefe"><div class="ttname"><a href="qp_8h.html#aa83d0862db97a1ad1d529cc08ac8e1dcac286909dd59290d1076b51d4cfdfaefe">Q_ENTRY_SIG</a></div><div class="ttdeci">@ Q_ENTRY_SIG</div><div class="ttdoc">signal for coding entry actions</div><div class="ttdef"><b>Definition</b> <a href="qp_8h_source.html#l00257">qp.h:257</a></div></div>
</div><!-- fragment --> </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted in the macros explicitly listed and traced to this record UID <b>DVP-QS-PCLP-823</b> in the <a class="el" href="qpc_8lnt.html" title="PC-Lint-Plus option file for analysing both QP/C and QP/C Applications">qpc.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<h1><a class="anchor" id="csc_dvr-pclp"></a>
Deviation Records for PCLP</h1>
<p>The deviation records in this section are for additional diagnostics generated by the PCLP static analysis tool that go beyond MISRA-C:2023.</p>
<p><a id="a118_DVR-QS-PCLP-506" name="a118_DVR-QS-PCLP-506"></a> </p>
<h2><a class="anchor" id="DVR-QS-PCLP-506"></a>
DVR-QS-PCLP-506</h2>
<table class="doxtable">
<tr>
<th>DVR-QS-PCLP-506 </th></tr>
<tr style="text-align:left">
<th>Constant value used in Boolean context (left operand to || operator) </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintainability, Testability) </li>
</ul>
</td></tr>
<tr>
<td><b>Background</b><br  />
 PCLP generates this diagnostics for the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> software tracing macros QS_BEGIN_PRE_() and QS_BEGIN_NOCRIT_PRE_() for certain constant settings of the "global" and "local" <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> filters, which can happen in the QP application code. </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted for the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> macros QS_BEGIN_PRE_() and QS_BEGIN_NOCRIT_PRE_() explicitly listed and traced to this permit UID <b>DVR-QS-PCLP-506</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a119_DVR-QS-PCLP-572" name="a119_DVR-QS-PCLP-572"></a> </p>
<h2><a class="anchor" id="DVR-QS-PCLP-572"></a>
DVR-QS-PCLP-572</h2>
<table class="doxtable">
<tr>
<th>DVR-QS-PCLP-572 </th></tr>
<tr style="text-align:left">
<th>Excessive shift value (precision 0 shifted right by ...) </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintainability) </li>
</ul>
</td></tr>
<tr>
<td><b>Background</b><br  />
 PCLP generates this diagnostics for the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> software tracing macros QS_BEGIN_PRE_() and QS_BEGIN_NOCRIT_PRE_() for certain constant settings of the "global" and "local" <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> filters, which can happen in the QP application code. </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted for the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> macros QS_BEGIN_PRE_() and QS_BEGIN_NOCRIT_PRE_() explicitly listed and traced to this permit UID <b>DVR-QS-PCLP-572</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a120_DVR-QS-PCLP-708" name="a120_DVR-QS-PCLP-708"></a> </p>
<h2><a class="anchor" id="DVR-QS-PCLP-708"></a>
DVR-QS-PCLP-708</h2>
<table class="doxtable">
<tr>
<th>DVR-QS-PCLP-708 </th></tr>
<tr style="text-align:left">
<th>Union initialization </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintainability ) </li>
</ul>
</td></tr>
<tr>
<td><b>Background</b><br  />
 PCLP generates this diagnostics for the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> software tracing function QS_f64_fmt_(). </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation permit is only granted for the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> function QS_f64_fmt_() explicitly listed and traced to this permit UID <b>DVR-QS-PCLP-708</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a121_DVR-QS-PCLP-778" name="a121_DVR-QS-PCLP-778"></a> </p>
<h2><a class="anchor" id="DVR-QS-PCLP-778"></a>
DVR-QS-PCLP-778</h2>
<table class="doxtable">
<tr>
<th>DVR-QS-PCLP-778 </th></tr>
<tr style="text-align:left">
<th>Constant expression evaluates to 0 in binary operation &gt;&gt; </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintainability) </li>
</ul>
</td></tr>
<tr>
<td><b>Background</b><br  />
 PCLP generates this diagnostics for the macros QS_BEGIN_PRE_() and QS_BEGIN_NOCRIT_PRE_() for certain constant settings of the "global" and "local" <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> filters, which can happen in the QP application code. </td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted for the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> macros QS_BEGIN_PRE_() and QS_BEGIN_NOCRIT_PRE_() explicitly listed and traced to this permit UID <b>DVR-QS-PCLP-778</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a122_DVR-QS-PCLP-845" name="a122_DVR-QS-PCLP-845"></a> </p>
<h2><a class="anchor" id="DVR-QS-PCLP-845"></a>
DVR-QS-PCLP-845</h2>
<table class="doxtable">
<tr>
<th>DVR-QS-PCLP-845 </th></tr>
<tr style="text-align:left">
<th>The right operand to &lt;&lt; always evaluates to 0 </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintainability) PCLP generates this diagnostics for the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> software tracing macros QS_BEGIN_PRE_() and QS_BEGIN_NOCRIT_PRE_() for certain constant settings of the "global" and "local" <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> filters, which can happen in the QP application code. </li>
</ul>
</td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted for the <a class="el" href="struct_q_s.html" title="Software tracing instrumentation, target-resident component (QS namespace emulated as a &quot;class&quot; in C)">QS</a> macros QS_BEGIN_PRE_() and QS_BEGIN_NOCRIT_PRE_() explicitly listed and traced to this permit UID <b>DVR-QS-PCLP-845</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><a id="a123_DVR-QP-PCLP-2445" name="a123_DVR-QP-PCLP-2445"></a> </p>
<h2><a class="anchor" id="DVR-QP-PCLP-2445"></a>
DVR-QP-PCLP-2445</h2>
<table class="doxtable">
<tr>
<th>DVR-QP-PCLP-2445 </th></tr>
<tr style="text-align:left">
<th>Cast increases required alignment from 2 to 4 </th></tr>
<tr>
<td><b>Reasons</b><br  />
<ul>
<li>Code quality (Maintainability) PCLP generates this diagnostics for the internal <a class="el" href="struct_q_x_k.html" title="QXK dual-mode kernel (QXK namespace emulated as a &quot;class&quot; in C)">QXK</a> macro <a class="el" href="qxk_8h.html#ac1c2a755f2e80f4ded28438fa8aab9eb">QXK_PTR_CAST_()</a>. That macro is used to cast a pointer to a blocking object to store it in the exterded thread (<a class="el" href="struct_q_x_thread.html" title="eXtended (blocking) thread of the QXK preemptive kernel">QXThread</a> class) for subsequent integrity checks. These checks are part of the QP Software Self-Monitoring (SSM) and are added for improved reliability. </li>
</ul>
</td></tr>
<tr>
<td><b>Restrictions</b><br  />
<ul>
<li>The deviation is only permitted for the macro <a class="el" href="qxk_8h.html#ac1c2a755f2e80f4ded28438fa8aab9eb">QXK_PTR_CAST_()</a> explicitly listed and traced to this permit UID <b>DVR-QS-PCLP-845</b> in the <a class="el" href="options_8lnt.html" title="PC-Lint-Plus option file for linting QP/C source code.">options.lnt</a> PCLP configuration file. </li>
</ul>
</td></tr>
</table>
<p><span class="prev_button"><a class="el" href="csc_gcs.html">Guideline Compliance Summary (GCS)</a></span>  </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="csc.html">MISRA-C:2023 Compliance</a></li>
    <li class="footer">
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2024 Quantum Leaps</a> &nbsp;|&nbsp; <a title="help" href="help.html">Using Online Help</a> &nbsp;|&nbsp; <b>QP/C 7.3.4</b> &nbsp;|&nbsp; Updated on Thu Mar 21 2024
<hr class="footer"/><address class="footer"><small>
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2024 Quantum Leaps</a> &nbsp;|&nbsp; <a title="help" href="help.html">Using Online Help</a> &nbsp;|&nbsp; <b>QP/C 7.3.4</b> &nbsp;|&nbsp; Updated on Thu Mar 21 2024
</small></address>
    </li>
  </ul>
</div>
</body>
</html>
